<!DOCTYPE html>
<html lang="hu">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Márkaszemélyiség kvíz</title>

<link rel="icon" type="image/png" href="https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/69370eeaa7ca9b8de5ae2d6f_favion-bb.png">
<link rel="stylesheet" href="https://use.typekit.net/bja6xtr.css">

<style>
*{box-sizing:border-box}

:root{
  --bg-body:#0f0f12;
  --bg-card:#16161b;
  --bg-soft:#1d1d23;
  --border-soft:#2a2a32;
  --text-main:#ffffff;
  --text-muted:rgba(255,255,255,0.65);
  --accent:#ffffff;
}

body{
  margin:0;
  padding:16px;
  background:var(--bg-body);
  color:var(--text-main);
  font-family:"atyp-bl-variable",system-ui,sans-serif;
  font-variation-settings:"opsz" 6,"ital" 0,"wght" 400;
  min-height: 100vh;
}

.quiz{
  max-width:820px;
  min-height: 100%;
  margin:0 auto;
  background:var(--bg-card);
  padding:28px 22px;
  border-radius:20px;
  box-shadow:0 30px 80px rgba(0,0,0,.45);
}

.quiz-title{
  text-align:center;
  font-size:26px;
  margin:0 0 4px;
  font-variation-settings:"wght" 600;
}

.quiz-sub{
  text-align:center;
  font-size:13px;
  opacity:.6;
  margin:0 0 20px;
}

.progress-wrap {
    display: none;
    margin-bottom: 32px;
    margin-top: 8px;
}
  
.progress-label{font-size:12px;opacity:.6;margin-bottom:6px}
.progress-bar{height:4px;background:#2a2a32;border-radius:999px;overflow:hidden}
.progress-bar-inner{height:100%;width:0;background:#fff}

.step{display:none}
.step.active{display:block}

h2{
  font-size:20px;
  margin:0 0 32px;
  font-variation-settings:"wght" 500;
}

p{
  font-size:14px;
  line-height:1.5;
  color:var(--text-muted);
  margin:0 0 14px;
}

.options{
  display:grid;
  gap:14px;
}

@media(min-width:600px){
  .options{grid-template-columns:1fr 1fr}
}

.option{
  background:var(--bg-soft);
  border:1px solid var(--border-soft);
  border-radius:16px;
  padding:18px;
  cursor:pointer;
  transition:.15s ease;
  font-size:16px;
}

.option img{
  width:100%;
  height:200px;
  object-fit:cover;
  border-radius:8px;
}

.option:not(:has(img)){
  display:flex;
  align-items:center;
  line-height: 1.5;
}

.option.selected{
  color:#000;
}

button{
  margin-top:32px;
  width:100%;
  padding:14px;
  border:none;
  border-radius:16px;
  background:#fff;
  color:#000;
  font-size:15px;
  cursor:pointer;
  font-family:"atyp-bl-variable",system-ui,sans-serif;
  font-variation-settings:"wght" 500;
}

button:disabled{opacity:.6}

.input-data{
  width:100%;
  padding:13px;
  border-radius:12px;
  border:1px solid var(--border-soft);
  background:var(--bg-soft);
  color:#fff;
  margin-bottom:10px;
}

.input-checkbox{
  padding:13px;
  border-radius:12px;
  border:1px solid var(--border-soft);
  background:var(--bg-soft);
  color:#fff;
  margin-bottom:10px;
}

.result-card{
  background:var(--bg-soft);
  border:1px solid var(--border-soft);
  border-radius:16px;
  padding:18px;
  margin-bottom:12px;
  cursor:pointer;
  transition:max-height 0.3s ease, opacity 0.3s ease;
}

.result-head{
  display:flex;
  justify-content:space-between;
}

.result-head:hover .arrow:not(.expanded) { transform: rotate(180deg); }

.result-card.expanded .result-head:hover .arrow { transform: rotate(0deg); }

.result-title{font-variation-settings:"wght" 500}
.result-percent{opacity:.6; font-variation-settings:"wght" 500}
.arrow {
  font-size: 16px;
  transition: transform 0.3s ease;
  display: inline-block;
  transform: rotate(0deg);
}

  
.result-wrapper {
  display: flex;
  gap: 8px;
  align-items: flex-start;
}
  
.result-desc{
  max-height:0;
  overflow:hidden;
  opacity:0;
  font-size: 15px;
  line-height: 20px;
  color:var(--text-muted);
  transition:max-height 0.3s ease, opacity 0.3s ease;
}

.result-card.expanded .result-desc{
  max-height:1000px;
  opacity:1;
  margin-top:16px;
}

.footer {
    margin-top: 40px;
    width: 100%;
    text-align: center;
    font-size: 12px;
    opacity: .6;
    display: flex;
    gap: 16px;
    align-items: flex-start;
    justify-content: center;
}
  
.footer a{
  color:#fff;
  text-decoration:none;
}

.quiz-logo-bar {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0px 16px 16px;
    border-radius: 16px 16px 0 0;
    background: transparent;
}

.quiz-logo {
  max-height: 20px;
  height: auto;
  width: auto;
  display: block;
}

.quiz-header {
  margin: 28px 0px 32px 0px;
}

.consent-row{
  display:flex;
  gap:8px;
  align-items:flex-start;
  font-size:12px;
  margin-top:8px;
}

.consent-text a{
  color:#fff;
  text-decoration:underline;
}



.input-checkbox{
  width:12px;
  height:12px;
  border-radius:3px;
  border:1px solid var(--border-soft);
  background:var(--bg-soft);
  display:inline-block;
  cursor:pointer;
  accent-color: black;
}

.visit-btn{
  display:block;
  margin-top:24px;
  width:100%;
  padding:14px;
  border-radius:16px;
  text-align:center;
  background:#736CED;
  color:white;
  font-size:15px;
  text-decoration:none;
  font-family:"atyp-bl-variable",system-ui,sans-serif;
  font-variation-settings:"wght" 500;
}

.visit-btn:hover{
  opacity:0.9;
}
</style>
  
</head>
<body>
<div class="quiz">
  <div class="quiz-logo-bar">
    <a href="https://brandbar.hu" target="_blank" rel="noopener">
      <img
        src="https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/69786bf5b6ecc66feb353812_921a5f481ecad0dce6b3e742fb3c0cb8_BB%20logo.png"
        alt="Brandbar logó"
        class="quiz-logo"
      >
    </a>
  </div>

  <div class="quiz-header" id="quizHeader">
    <h1 class="quiz-title">Márkaszemélyiség kvíz</h1>
    <p class="quiz-sub">Fedezd fel melyik archetípus testesíti meg a márkádat</p>
  </div>

  <div class="progress-wrap" id="progressWrap">
    <div class="progress-label" id="progressLabel">1 / 13</div>
    <div class="progress-bar">
      <div class="progress-bar-inner" id="progressBar"></div>
    </div>
  </div>

  <div id="steps"></div>

  <footer class="footer">
    <a href="https://brandbar.hu" target="_blank">brandbar.hu</a>
    <a href="https://www.brandbar.hu/privacy-policy" target="_blank">Adatkezelési tájékoztató</a>
  </footer>
</div>

  
<script>
const archetypes = { Mars:0, Mercurius:0, Jupiter:0, Apollo:0, Terra:0, Ceres:0, Juno:0, Venus:0 };
const stepsEl = document.getElementById("steps");
const progressWrap = document.getElementById("progressWrap");
const progressBar = document.getElementById("progressBar");
const progressLabel = document.getElementById("progressLabel");
const quizHeader = document.getElementById("quizHeader");

const archetypeOrder = ["Mars","Mercurius","Jupiter","Apollo","Terra","Ceres","Juno","Venus"];

stepsEl.innerHTML += `
<div class="step active">
  <h2>Üdvözlünk a Márkaszemélyiség kvízben!</h2>
  <p>Ez a kvíz segít feltérképezni, milyen archetípus jellemzi a céged. Kezdésnek kérjük, add meg a neved és email címed:</p>
  <input type="email" placeholder="Email címed" id="startEmail" class="input-data">
  <input type="text" placeholder="Név" id="startName" class="input-data">

  <label class="consent-row">
  <input type="checkbox" id="privacyConsent" class="input-checkbox">
  <span class="consent-text">
    Elolvastam és elfogadom az 
    <a href="https://www.brandbar.hu/privacy-policy" target="_blank" rel="noopener">
      Adatkezelési tájékoztatót
    </a>
  </span>
  </label>

  <button onclick="startQuiz()">Kezdhetjük!</button>
</div>
`;

const stepsData = [
  {
    q:"Vendégváró tér",
    type:"image",
    options:[
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c23b0a910156974e27c0_01_vendegvaro_1MARS.webp",
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c23cca2de223c9093154_01_vendegvaro_2MERCURIUS.webp",
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c23b7203d4f431f9fd9c_01_vendegvaro_3JUPITER.webp",
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c23bd42e5d20729ede5d_01_vendegvaro_4APOLLO.webp",
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c23bcc411f6707edacfd_01_vendegvaro_5TERRA.webp",
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c23ce96be70bcbcbdda2_01_vendegvaro_6CERES.webp",
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c23c23a1a4975c5f2cca_01_vendegvaro_7JUNO.webp",
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c23ce1e8dbc951d38960_01_vendegvaro_8VENUS.webp"
    ]
  },
  {
    q:"Tárgyaló",
    type:"image",
    options:[
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c23c00698ff2f4703869_02_targyalo_1MARS.webp",
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c23cd52140975be2711e_02_targyalo_2MERCURIUS.webp",
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c23c22d4dd1c601fd4a7_02_targyalo_3JUPITER.webp",
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c23cd3f4f6836930a187_02_targyalo_4APOLLO.webp",
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c23c03154c383abe3288_02_targyalo_5TERRA.webp",
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c23c9f16002b40eee149_02_targyalo_6CERES.webp",
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c23c0128708e9eb873a9_02_targyalo_7JUNO.webp",
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c23cdf91cc6cc0f63778_02_targyalo_8VENUS.webp"
    ]
  },
  {
    q:"Festmény a tárgyaló falán",
    type:"image",
    options:[
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c23c41ad28040a73c5bf_03_faldekor_1MARS.webp",
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c23c3697d0848f5ca0b6_03_faldekor_2MERCURIUS.webp",
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c23cd2970deafbfe5ef0_03_faldekor_3JUPITER.webp",
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c23caa9993594f2a8b4e_03_faldekor_4APOLLO.webp",
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/697a00fa6d49e1b5f61c207a_03_faldekor_5TERRA.webp",
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c23d524a421a193e6fc7_03_faldekor_6CERES.webp",
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c23da62958f6397c1323_03_faldekor_7JUNO.webp",
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c23ca71fcaa20b73cb80_03_faldekor_8VENUS.webp"
    ]
  },
  {
    q:"Női dresszkód",
    type:"image",
    options:[
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c23d229f197be212b170_04_noi-dresscode_1MARS.webp",
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c23d9a450a50d27c8a15_04_noi-dresscode_2MERCURIUS.webp",
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c23de5285db77dc90c2c_04_noi-dresscode_3JUPITER.webp",
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c23d0cb9eaacc87d5550_04_noi-dresscode_4APOLLO.webp",
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c23d37739ee9400c181f_04_noi-dresscode_5TERRA.webp",
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c23df5a8ea6cbe0910f7_04_noi-dresscode_6CERES.webp",
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c23d27f28fbabd0b83cd_04_noi-dresscode_7JUNO.webp",
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c23deb14521b6827bce6_04_noi-dresscode_8VENUS.webp"
    ]
  },
  {
    q:"Férfi dresszkód",
    type:"image",
    options:[
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c23da38bced60f3df1b2_05_ferfi-dresscode_1MARS.webp",
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/697a01280f4335ca28ae48f8_05_ferfi-dresscode_2MERCURIUS_2.webp",
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c23d68d28aa6d91a049c_05_ferfi-dresscode_3JUPITER.webp",
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c23ea85ae652675f733f_05_ferfi-dresscode_4APOLLO.webp",
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c23e60c15a1d41fee176_05_ferfi-dresscode_5TERRA.webp",
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c23ee644d8c3e0d4fc0f_05_ferfi-dresscode_6CERES.webp",
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c23e8d5798384304f466_05_ferfi-dresscode_7JUNO.webp",
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c23e9b7cba5c85604358_05_ferfi-dresscode_8VENUS.webp"
    ]
  },
  {
    q:"“1. TÁRGYALÓ”-felirat",
    type:"image",
    options:[
      "https://picsum.photos/600/400?random=41",
      "https://picsum.photos/600/400?random=42",
      "https://picsum.photos/600/400?random=43",
      "https://picsum.photos/600/400?random=44",
      "https://picsum.photos/600/400?random=45",
      "https://picsum.photos/600/400?random=46",
      "https://picsum.photos/600/400?random=47",
      "https://picsum.photos/600/400?random=48"
    ]
  },
  {
    q:"Képernyőkímélő diavetítés",
    type:"image",
    options:[
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c23f48b148791ec869f1_07_kepernyokimelo_.webp",
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c23fa25d4e1373db97c7_07_kepernyokimelo_2MERCURIUS.webp",
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c23fc29d8cdc8599e732_07_kepernyokimelo_3JUPITER.webp",
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c23fb01ea532840f60c0_07_kepernyokimelo_4APOLLO.webp",
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c23fc0eab851b0d31206_07_kepernyokimelo_5TERRA.webp",
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c24002a4eb6a96e83618_07_kepernyokimelo_6CERES.webp",
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c240078ba042c91ab69a_07_kepernyokimelo_7JUNO.webp",
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c240e48d4e320ecae4ec_07_kepernyokimelo_8VENUS.webp"
    ]
  },
  {
    q:"A cég személyiségéhez leginkább illő színek",
    type:"image",
    options:[
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c2404ddaa97d4d95b148_08_szinek_1MARS.webp",
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c240b7ae036f5698719a_08_szinek_2MERCURIUS.webp",
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c240059b9478f60703bc_08_szinek_3JUPITER.webp",
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c240a71adfe69c416862_08_szinek_4APOLLO.webp",
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c24033a96aa1fd8498ff_08_szinek_5TERRA.webp",
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c24031fecc1150e11d91_08_szinek_6CERES.webp",
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c241d09e477bf16b064e_08_szinek_7JUNO.webp",
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c24123583ff196d7afac_08_szinek_8VENUS.webp"
    ]
  },
  {
    q:"BrandBar logók",
    type:"image",
    options:[
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c241d09e477bf16b0654_09_Brandbar-logok_1MARS.webp",
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c241719c9487a17291be_09_Brandbar-logok_2MERCURIUS.webp",
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c2416cd9a7834a383391_09_Brandbar-logok_3JUPITER.webp",
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c24105aea13fdbe10830_09_Brandbar-logok_4.webp",
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c2419959d4f8afacbf3c_09_Brandbar-logok_5TERRA.webp",
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c2411b18591d5ab156db_09_Brandbar-logok_6CERES.webp",
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c24132b2b665b9cc41ea_09_Brandbar-logok_7JUNO.webp",
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c24144cb48ebb5b7e89b_09_Brandbar-logok_8VENUS.webp"
    ]
  },
  {
    q:"BB betű",
    type:"image",
    options:[
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c241cb80fea46aad3e37_10_BB_1MARS.webp",
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c242daa7baf6edced135_10_BB_2MERCURIUS.webp",
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c242ff057dc28e2d72c8_10_BB_3JUPITER.webp",
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c24222d4dd1c601fd580_10_BB_4APOLLO.webp",
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c24231fecc1150e11dc1_10_BB_5TERRA.webp",
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c2420751dcab17f9131c_10_BB_6CERES.webp",
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c24222d4dd1c601fd598_10_BB_7JUNO.webp",
      "https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/6979c242e1e8dbc951d38a08_10_BB_8VENUS.webp"
    ]
  },
  {
    q:"Jelmondatok",
    type:"text",
    options:[
      "Mi vagyunk a változás motorja",
      "Mi diktáljuk a tempót",
      "Mi írjuk a szabályokat",
      "A tudás hatalom",
      "Az idő nekünk dolgozik",
      "A fenntartható közös jót szolgáljuk",
      "Együtt nagyot alkotunk",
      "A világ a mi játszóterünk"
    ]
  },
  {
    q:"Mi a cég legnagyobb értéke? / Mit tartasz a legnagyobb értéknek?",
    type:"text",
    options:[
      "Merészség az újításhoz, energia a megvalósításhoz",
      "Az újdonságban rejlő lehetőségek kiaknázásának képessége",
      "Megalkuvás nélküli megkérdőjelezhetetlenség",
      "A precíz tervezés, tiszta folyamatok, a munkatársak tudása",
      "A folytonosság biztonsága, távlatokban való gondolkodás",
      "A felelős hozzáállás, mely túlmutat a cég keretein",
      "Az eltérő nézőpontok elfogadása, képesség az együttműködésre",
      "A változásokból rugalmasan és optimistán kihozza a legjobbat"
    ]
  },
  {
    q:"Mi lenne a vezetőség legnagyobb kudarca? Ha a munkatársak azt éreznék, hogy…",
    type:"text",
    options:[
      "szakmailag nem elég úttörő, ami innen kikerül",
      "a versenytársak megelőznek minket",
      "nem elég sikeres a cég",
      "nem elég átlátható és hatékony a szervezet működése",
      "a sok bizonytalanság negatívan hat az emberekre és a munkára",
      "a céget csak a profit érdekli, nem közvetít értéket",
      "nincsenek eléggé emberileg támogatva, nincs közösség",
      "unalmasak, nem elég motiválóak a feladatok"
    ]
  },
  {
    q:"Milyen az ideális munkatárs?",
    type:"text",
    options:[
      "Aki proaktív, elébe megy a dolgoknak, folyamatosan megújítja a munkamódszereit",
      "Aki tisztában van a trendekkel és hatékonyan alkalmazni is tudja az új fejlesztéseket",
      "Aki karizmatikus, kezébe veszi még a nehéz feladatokat is és meg is valósítja őket",
      "Aki precíz, fegyelmezett, fókuszált, rendszerezett és hatékony ",
      "Pontosan tudod, miben számíthatsz rá, egyenletes teljesítményt nyújt",
      "Mindig lehet hozzá fordulni segítségért, mindig készen áll támogatni a munkatársakat",
      "Aki igazi csapatjátékos és a legtöbbet tudja kihozni másokból",
      "Aki mindig pozitívan áll a dolgokhoz, tele van ötletekkel"
    ]
  },
  {
    q:"Milyen az ideális munkatárs?",
    type:"text",
    options:[
      "Aki proaktív, elébe megy a dolgoknak, ezáltal a változások motorja.",
      "Aki karizmatikus, kezébe veszi még a nehéz feladatokat is.",
      "Aki precíz, fegyelmezett, fókuszált és pontosan tudod, miben számíthatsz rá.",
      "Aki képes arra, hogy a különböző álláspontokat közös nevezőre hozza.",
      "Aki igazi csapatjátékos és a legtöbbet tudja kihozni másokból.",
      "Aki mindig optimistán áll a dolgokhoz, tele van jó ötletekkel.",
      "Aki nyugodt, kiegyensúlyozott és biztonságot sugároz.",
      "Aki gondoskodó, odafigyel másokra, és támogatja a többieket."
    ]
  },
  {
    q:"Mi a cég sikerstratégiája?",
    type:"text",
    options:[
      "a status quo megkérdőjelezése",
      "elsőként kovácsolni tőkét a piac változásaiból",
      "a vízió és a hatékony vezetés",
      "az elemzésen alapuló tervezés",
      "a biztos alapok lefektetése és a bevált gyakorlatok alkalmazása",
      "felelősségteljes hozzáállás",
      "a különböző igények kielégítése ",
      "az új helyzetekre való rugalmas reagálás"
    ]
  }
];

// Segédfüggvény a randomizált opciók generálásához
function shuffleOptions(stepData) {
  const shuffled = [...stepData.options];
  for (let i = shuffled.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
  }
  
  // archetype sorrend is randomizáljuk ugyanúgy
  const shuffledArchetypes = [...archetypeOrder];
  for (let i = shuffledArchetypes.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [shuffledArchetypes[i], shuffledArchetypes[j]] = [shuffledArchetypes[j], shuffledArchetypes[i]];
  }
  
  // párosítjuk őket: új sorrendben az options és archetype-ek
  return shuffled.map((opt, idx) => ({
    content: opt,
    archetype: shuffledArchetypes[idx]
  }));
}

// kérdés stepek generálása
stepsData.forEach((s, i) => {
  // Minden kérdésnél randomizáljuk az opciókat
  const randomizedOptions = shuffleOptions(s);
  
  let optionsHtml = randomizedOptions.map((item) => {
    if(s.type === "image"){
      return `<div class="option" data-archetype="${item.archetype}"><img src="${item.content}" alt=""></div>`;
    } else {
      return `<div class="option" data-archetype="${item.archetype}">${item.content}</div>`;
    }
  }).join("");

  // utolsó kérdésnél a gomb már sendResults()-ot hív
  const isLastQuestion = (i === stepsData.length - 1);
  const buttonHandler = isLastQuestion ? "sendResults()" : "nextStep()";
  const buttonLabel = isLastQuestion ? "Eredmény mentése" : "Tovább";

  stepsEl.innerHTML += `
    <div class="step">
      <h2>${i+1}. ${s.q}</h2>
      <div class="options">${optionsHtml}</div>
      <button onclick="${buttonHandler}">${buttonLabel}</button>
      <div class="send-status" ${isLastQuestion ? 'id="sendStatus"' : ''}></div>
    </div>
  `;
});

stepsEl.innerHTML += `
<div class="step">
  <h2>Eredményed</h2>
  <div class="result-list" id="result"></div>

  <a href="https://brandbar.hu" target="_blank" class="visit-btn">
    Látogass el weboldalunkra
  </a>
</div>
`;

let current = 0;
const steps = document.querySelectorAll(".step");
const totalQuestionSteps = stepsData.length;

function updateProgress() {
  const questionIndex = Math.min(Math.max(current - 1, 0), totalQuestionSteps - 1);
  const total = totalQuestionSteps;
  if (total <= 0) return;

  progressLabel.textContent = `${questionIndex + 1} / ${total}`;
  const percent = (questionIndex / total) * 100;
  progressBar.style.width = `${percent}%`;
}

const optionColors = [
  "#BC1766",
  "#95C11F",
  "#736CED",
  "#EFD200",
  "#009688",
  "#F7A600",
  "#1978D8",
  "#F24D49"
];

  
// start quiz
function startQuiz(){
  const email = document.getElementById("startEmail").value.trim();
  const name = document.getElementById("startName").value.trim();
  const consent = document.getElementById("privacyConsent").checked;

  if(!email || !name) { 
    alert("Kérlek add meg az email címed és neved!"); 
    return; 
  }

  if(!consent){
    alert("Kérlek pipáld be, hogy elolvastad és elfogadod az Adatkezelési tájékoztatót!");
    return;
  }

  steps[0].classList.remove("active");
  current = 1;
  steps[current].classList.add("active");

  quizHeader.style.display = "none";
  progressWrap.style.display = "block";
  updateProgress();
}

// kiválasztás
document.addEventListener("click", e=>{
  const option = e.target.closest(".option");
  if(!option) return;

  // előző kiválasztott törlése + háttér reset
  option.parentElement.querySelectorAll(".option").forEach(o=>{
    o.classList.remove("selected");
    o.style.backgroundColor = "";
    o.style.color = "";
    o.style.borderColor = "var(--border-soft)";
  });

  // új kiválasztott
  option.classList.add("selected");

  // random szín választása a listából
  const randomColor = optionColors[Math.floor(Math.random() * optionColors.length)];
  option.style.backgroundColor = randomColor;
  option.style.color = "#000";
  option.style.borderColor = randomColor;
});


function nextStep(){
  const selected = steps[current].querySelector(".option.selected");
  if(!selected) { 
    alert("Válassz egy opciót!"); 
    return; 
  }
  archetypes[selected.dataset.archetype]++;
  steps[current].classList.remove("active");
  current++;
  steps[current].classList.add("active");
  updateProgress();
  window.scrollTo({top:0, behavior:"smooth"});
}

const archetypeDescriptions = {
  Mars: "Itt a Mars leírása, amit te írsz meg.",
  Mercurius: "Itt a Mercurius leírása.",
  Jupiter: "Itt a Jupiter leírása.",
  Apollo: "Itt az Apollo leírása.",
  Terra: "Itt a Terra leírása.",
  Ceres: "Itt a Ceres leírása.",
  Juno: "Itt a Juno leírása.",
  Venus: "Itt a Venus leírása."
};


const archetypeColors = {
  Mars:   "#F24D49",
  Mercurius: "#BC1766",
  Jupiter:   "#736CED",
  Apollo:    "#1978D8",
  Terra:     "#009688",
  Ceres:     "#95C11F",
  Juno:      "#EFD200",
  Venus:     "#F7A600"
};

function hexToRgba(hex, alpha){
  const h = hex.replace("#","");
  const r = parseInt(h.substring(0,2),16);
  const g = parseInt(h.substring(2,4),16);
  const b = parseInt(h.substring(4,6),16);
  return `rgba(${r}, ${g}, ${b}, ${alpha})`;
}
  
  
// eredmény megjelenítés
function showResult(){
  const total = Object.values(archetypes).reduce((a,b)=>a+b,0) || 1;
  
  let scores = Object.entries(archetypes).map(([name, score]) => ({
    name,
    percent: Math.round(score / total * 100)
  })).sort((a, b) => b.percent - a.percent);
  
  const maxPercent = scores.reduce((max, s) => s.percent > max ? s.percent : max, 0);

  // csak a >0%-osak indexelése a skálázáshoz
  const nonZeroScores = scores.filter(s => s.percent > 0);
  const n = nonZeroScores.length;
  const minAlpha = 0.2;   // legutolsó kb. 20%
  const maxAlpha = 1.0;   // legelső 100%

  let html = "";
  scores.forEach((score) => {
    const desc = archetypeDescriptions[score.name] || "";
    const baseColor = archetypeColors[score.name] || "#1d1d23";

    let cardBg = "var(--bg-soft)";
    let cardBorder = "var(--border-soft)";

    if (score.percent > 0 && maxPercent > 0) {
      if (score.percent === maxPercent) {
        // legmagasabb: teljes szín
        cardBg = baseColor;
        cardBorder = baseColor;
      } else {
        // saját pozíció a csak-pozitív listában
        const idx = nonZeroScores.findIndex(s => s.name === score.name);

        let alpha;
        if (n <= 1) {
          alpha = maxAlpha;
        } else {
          // lineáris skála: első = maxAlpha, utolsó = minAlpha
          alpha = maxAlpha - (idx / (n - 1)) * (maxAlpha - minAlpha);
        }

        const rgba = hexToRgba(baseColor, alpha);
        cardBg = rgba;
        cardBorder = baseColor;
      }
    }

    html += `
      <div class="result-card" data-name="${score.name}" style="background:${cardBg}; border-color:${cardBorder};">
        <div class="result-head">
          <div class="result-wrapper">
            <div class="result-title">${score.name}</div>
            <div class="result-percent">${score.percent}%</div>
          </div>
          <span class="arrow">▼</span>
        </div>
        <div class="result-desc">
          ${desc}
        </div>
      </div>
    `;
  });
  
  document.getElementById("result").innerHTML = html;
  
  document.querySelectorAll(".result-card").forEach(card => {
    const head = card.querySelector(".result-head");
    const arrow = card.querySelector(".arrow");
    
    head.addEventListener("click", () => {
      arrow.style.transform = '';
      card.classList.toggle("expanded");
      arrow.style.transform = card.classList.contains("expanded")
        ? 'rotate(180deg)'
        : 'rotate(0deg)';
    });
  });
}



let isSending = false;

function sendResults(){
  if (isSending) return;

  const selected = steps[current].querySelector(".option.selected");
  if(!selected) { 
    alert("Válassz egy opciót!"); 
    return; 
  }
  archetypes[selected.dataset.archetype]++;

  const email = document.getElementById("startEmail").value.trim();
  const name = document.getElementById("startName").value.trim();
  if(!email || !name){ 
    alert("Hiányzó név vagy email. Lépj vissza az elejére és töltsd ki."); 
    return; 
  }

  const btn = steps[current].querySelector("button");
  const statusEl = document.getElementById("sendStatus");

  isSending = true;
  btn.disabled = true;
  btn.textContent = "Küldés folyamatban...";
  statusEl.innerHTML = '<span class="spinner"></span>Eredmények mentése...';

  fetch("https://brand-quiz-proxy.vercel.app/api/quiz-proxy", {
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body: JSON.stringify({ email: email, name: name, results: archetypes })
  })
  .then(res => res.text())
  .then(text => {
    console.log("Válasz a szervertől:", text);
    statusEl.textContent = "Az eredményeket elmentettük. Köszönjük a kitöltést!";

    steps[current].classList.remove("active");
    current = steps.length - 1;
    steps[current].classList.add("active");
    progressBar.style.width = "100%";
    progressLabel.textContent = `${totalQuestionSteps} / ${totalQuestionSteps}`;
    showResult();
    window.scrollTo({top:0, behavior:"smooth"});
  })
  .catch(err => {
    console.error(err);
    statusEl.textContent = "Hiba történt a mentés során. Kérjük, próbáld meg később újra.";
    btn.disabled = false;
    btn.textContent = "Eredmény mentése";
    isSending = false;
  });
}
</script>
</body>
</html>
