<!DOCTYPE html>
<html lang="hu">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Márkaszemélyiség kvíz</title>

<link rel="icon" type="image/png" href="https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/69370eeaa7ca9b8de5ae2d6f_favion-bb.png">
<link rel="stylesheet" href="https://use.typekit.net/bja6xtr.css">

<style>
*{box-sizing:border-box}

:root{
  --bg-body:#0f0f12;
  --bg-card:#16161b;
  --bg-soft:#1d1d23;
  --border-soft:#2a2a32;
  --text-main:#ffffff;
  --text-muted:rgba(255,255,255,0.65);
  --accent:#ffffff;
}

body{
  margin:0;
  padding:16px;
  background:var(--bg-body);
  color:var(--text-main);
  font-family:"atyp-bl-variable",system-ui,sans-serif;
  font-variation-settings:"opsz" 6,"ital" 0,"wght" 400;
}

.quiz{
  max-width:820px;
  margin:0 auto;
  background:var(--bg-card);
  padding:28px 22px;
  border-radius:20px;
  box-shadow:0 30px 80px rgba(0,0,0,.45);
}

.quiz-title{
  text-align:center;
  font-size:26px;
  margin:0 0 4px;
  font-variation-settings:"wght" 600;
}

.quiz-sub{
  text-align:center;
  font-size:13px;
  opacity:.6;
  margin:0 0 20px;
}

.progress-wrap {
    display: none;
    margin-bottom: 32px;
    margin-top: 8px;
}
  
.progress-label{font-size:12px;opacity:.6;margin-bottom:6px}
.progress-bar{height:4px;background:#2a2a32;border-radius:999px;overflow:hidden}
.progress-bar-inner{height:100%;width:0;background:#fff}

.step{display:none}
.step.active{display:block}

h2{
  font-size:20px;
  margin:0 0 32px;
  font-variation-settings:"wght" 500;
}

p{
  font-size:14px;
  line-height:1.5;
  color:var(--text-muted);
  margin:0 0 14px;
}

.options{
  display:grid;
  gap:14px;
}

@media(min-width:600px){
  .options{grid-template-columns:1fr 1fr}
}

.option{
  background:var(--bg-soft);
  border:1px solid var(--border-soft);
  border-radius:16px;
  padding:18px;
  cursor:pointer;
  transition:.15s ease;
  font-size:16px;
  line-height: 1.5;
}

.option img{
  width:100%;
  height:200px;
  object-fit:cover;
  border-radius:8px;
}

.option:not(:has(img)){
  display:flex;
  align-items:center;
}

.option.selected{
  background:#fff;
  color:#000;
  border-color:#fff;
}

button{
  margin-top:32px;
  width:100%;
  padding:14px;
  border:none;
  border-radius:16px;
  background:#fff;
  color:#000;
  font-size:15px;
  cursor:pointer;
  font-family:"atyp-bl-variable",system-ui,sans-serif;
  font-variation-settings:"wght" 500;
}

button:disabled{opacity:.6}

input{
  width:100%;
  padding:13px;
  border-radius:12px;
  border:1px solid var(--border-soft);
  background:var(--bg-soft);
  color:#fff;
  margin-bottom:10px;
}

.result-card{
  background:var(--bg-soft);
  border:1px solid var(--border-soft);
  border-radius:16px;
  padding:18px;
  margin-bottom:12px;
  cursor:pointer;
  transition:max-height 0.3s ease, opacity 0.3s ease;
}

.result-head{
  display:flex;
  justify-content:space-between;
}

.result-head:hover .arrow{transform:rotate(180deg)}

.result-title{font-variation-settings:"wght" 500}
.result-percent{opacity:.6; font-variation-settings:"wght" 500}
.arrow{font-size:16px; transition:transform 0.3s ease; display:inline-block}
  
.result-wrapper {
  display: flex;
  gap: 8px;
  align-items: flex-start;
}
  
.result-desc{
  max-height:0;
  overflow:hidden;
  opacity:0;
  font-size: 15px;
  line-height: 20px;
  color:var(--text-muted);
  margin-top:12px;
  transition:max-height 0.3s ease, opacity 0.3s ease;
}

.result-card.expanded .result-desc{
  max-height:1000px;
  opacity:1;
  margin-top:16px;
}

.footer {
    margin-top: 40px;
    width: 100%;
    text-align: center;
    font-size: 12px;
    opacity: .6;
    display: flex;
    gap: 16px;
    align-items: flex-start;
    justify-content: center;
}
  
.footer a{
  color:#fff;
  text-decoration:none;
}

.quiz-logo-bar {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0px 16px 16px;
    border-radius: 16px 16px 0 0;
    background: transparent;
}

.quiz-logo {
  max-height: 20px;
  height: auto;
  width: auto;
  display: block;
}

.quiz-header {
  margin: 28px 0px 32px 0px;
}
</style>
  
</head>
<body>
<div class="quiz">
  <div class="quiz-logo-bar">
    <a href="https://brandbar.hu" target="_blank" rel="noopener">
      <img
        src="https://cdn.prod.website-files.com/68c02379dfdad28c3492d8c5/69786bf5b6ecc66feb353812_921a5f481ecad0dce6b3e742fb3c0cb8_BB%20logo.png"
        alt="Brandbar logó"
        class="quiz-logo"
      >
    </a>
  </div>

  <div class="quiz-header" id="quizHeader">
    <h1 class="quiz-title">Márkaszemélyiség kvíz</h1>
    <p class="quiz-sub">Fedezd fel melyik archetípus testesíti meg a márkádat</p>
  </div>

  <div class="progress-wrap" id="progressWrap">
    <div class="progress-label" id="progressLabel">1 / 13</div>
    <div class="progress-bar">
      <div class="progress-bar-inner" id="progressBar"></div>
    </div>
  </div>

  <div id="steps"></div>

  <footer class="footer">
    <a href="https://brandbar.hu" target="_blank">brandbar.hu</a>
    <a href="https://www.brandbar.hu/privacy-policy" target="_blank">Adatkezelési tájékoztató</a>
  </footer>
</div>

  
<script>
const archetypes = { Mars:0, Mercurius:0, Jupiter:0, Apollo:0, Terra:0, Ceres:0, Juno:0, Venus:0 };
const stepsEl = document.getElementById("steps");
const progressWrap = document.getElementById("progressWrap");
const progressBar = document.getElementById("progressBar");
const progressLabel = document.getElementById("progressLabel");
const quizHeader = document.getElementById("quizHeader");

const archetypeOrder = ["Mars","Mercurius","Jupiter","Apollo","Terra","Ceres","Juno","Venus"];

stepsEl.innerHTML += `
<div class="step active">
  <h2>Üdvözlünk a Márkaszemélyiség kvízben!</h2>
  <p>Ez a kvíz segít feltérképezni, milyen archetípus jellemzi a céged. Kezdésnek kérjük, add meg a neved és email címed:</p>
  <input type="email" placeholder="Email címed" id="startEmail">
  <input type="text" placeholder="Név" id="startName">

  <label style="display:flex; gap:8px; align-items:flex-start; font-size:12px; margin-top:8px;">
    <input type="checkbox" id="privacyConsent" style="margin-top:3px;">
    <span>Elolvastam és elfogadom az <a href="https://www.brandbar.hu/privacy-policy" target="_blank" rel="noopener">Adatkezelési tájékoztatót</a>.</span>
  </label>

  <button onclick="startQuiz()">Kezdhetjük</button>
</div>
`;

const stepsData = [
  {
    q:"Vendégváró tér",
    type:"image",
    options:[
      "https://picsum.photos/600/400?random=1",
      "https://picsum.photos/600/400?random=2",
      "https://picsum.photos/600/400?random=3",
      "https://picsum.photos/600/400?random=4",
      "https://picsum.photos/600/400?random=5",
      "https://picsum.photos/600/400?random=6",
      "https://picsum.photos/600/400?random=7",
      "https://picsum.photos/600/400?random=8"
    ]
  },
  {
    q:"Tárgyaló",
    type:"image",
    options:[
      "https://picsum.photos/600/400?random=9",
      "https://picsum.photos/600/400?random=10",
      "https://picsum.photos/600/400?random=11",
      "https://picsum.photos/600/400?random=12",
      "https://picsum.photos/600/400?random=13",
      "https://picsum.photos/600/400?random=14",
      "https://picsum.photos/600/400?random=15",
      "https://picsum.photos/600/400?random=16"
    ]
  },
  {
    q:"Festmény a tárgyaló falán",
    type:"image",
    options:[
      "https://picsum.photos/600/400?random=17",
      "https://picsum.photos/600/400?random=18",
      "https://picsum.photos/600/400?random=19",
      "https://picsum.photos/600/400?random=20",
      "https://picsum.photos/600/400?random=21",
      "https://picsum.photos/600/400?random=22",
      "https://picsum.photos/600/400?random=23",
      "https://picsum.photos/600/400?random=24"
    ]
  },
  {
    q:"Női dresszkód",
    type:"image",
    options:[
      "https://picsum.photos/600/400?random=25",
      "https://picsum.photos/600/400?random=26",
      "https://picsum.photos/600/400?random=27",
      "https://picsum.photos/600/400?random=28",
      "https://picsum.photos/600/400?random=29",
      "https://picsum.photos/600/400?random=30",
      "https://picsum.photos/600/400?random=31",
      "https://picsum.photos/600/400?random=32"
    ]
  },
  {
    q:"Férfi dresszkód",
    type:"image",
    options:[
      "https://picsum.photos/600/400?random=33",
      "https://picsum.photos/600/400?random=34",
      "https://picsum.photos/600/400?random=35",
      "https://picsum.photos/600/400?random=36",
      "https://picsum.photos/600/400?random=37",
      "https://picsum.photos/600/400?random=38",
      "https://picsum.photos/600/400?random=39",
      "https://picsum.photos/600/400?random=40"
    ]
  },
  {
    q:"“1. TÁRGYALÓ”-felirat",
    type:"image",
    options:[
      "https://picsum.photos/600/400?random=41",
      "https://picsum.photos/600/400?random=42",
      "https://picsum.photos/600/400?random=43",
      "https://picsum.photos/600/400?random=44",
      "https://picsum.photos/600/400?random=45",
      "https://picsum.photos/600/400?random=46",
      "https://picsum.photos/600/400?random=47",
      "https://picsum.photos/600/400?random=48"
    ]
  },
  {
    q:"Képernyőkímélő diavetítés",
    type:"image",
    options:[
      "https://picsum.photos/600/400?random=49",
      "https://picsum.photos/600/400?random=50",
      "https://picsum.photos/600/400?random=51",
      "https://picsum.photos/600/400?random=52",
      "https://picsum.photos/600/400?random=53",
      "https://picsum.photos/600/400?random=54",
      "https://picsum.photos/600/400?random=55",
      "https://picsum.photos/600/400?random=56"
    ]
  },
  {
    q:"A cég személyiségéhez leginkább illő színek",
    type:"image",
    options:[
      "https://picsum.photos/600/400?random=57",
      "https://picsum.photos/600/400?random=58",
      "https://picsum.photos/600/400?random=59",
      "https://picsum.photos/600/400?random=60",
      "https://picsum.photos/600/400?random=61",
      "https://picsum.photos/600/400?random=62",
      "https://picsum.photos/600/400?random=63",
      "https://picsum.photos/600/400?random=64"
    ]
  },
  {
    q:"Jelmondatok",
    type:"text",
    options:[
      "Mi vagyunk a változás motorja",
      "Mi diktáljuk a tempót",
      "Mi írjuk a szabályokat",
      "A tudás hatalom",
      "Az idő nekünk dolgozik",
      "A fenntartható közös jót szolgáljuk",
      "Együtt nagyot alkotunk",
      "A világ a mi játszóterünk"
    ]
  },
  {
    q:"Mi a cég legnagyobb értéke? / Mit tartasz a legnagyobb értéknek?",
    type:"text",
    options:[
      "Merészség az újításhoz, energia a megvalósításhoz",
      "Az újdonságban rejlő lehetőségek kiaknázásának képessége",
      "Megalkuvás nélküli megkérdőjelezhetetlenség",
      "A precíz tervezés, tiszta folyamatok, a munkatársak tudása",
      "A folytonosság biztonsága, távlatokban való gondolkodás",
      "A felelős hozzáállás, mely túlmutat a cég keretein",
      "Az eltérő nézőpontok elfogadása, képesség az együttműködésre",
      "A változásokból rugalmasan és optimistán kihozza a legjobbat"
    ]
  },
  {
    q:"Mi lenne a vezetőség legnagyobb kudarca? Ha a munkatársak azt éreznék, hogy…",
    type:"text",
    options:[
      "szakmailag nem elég úttörő, ami innen kikerül",
      "a versenytársak megelőznek minket",
      "nem elég sikeres a cég",
      "nem elég átlátható és hatékony a szervezet működése",
      "a sok bizonytalanság negatívan hat az emberekre és a munkára",
      "a céget csak a profit érdekli, nem közvetít értéket",
      "nincsenek eléggé emberileg támogatva, nincs közösség",
      "unalmasak, nem elég motiválóak a feladatok"
    ]
  },
  {
    q:"Milyen az ideális munkatárs?",
    type:"text",
    options:[
      "Aki proaktív, elébe megy a dolgoknak, folyamatosan megújítja a munkamódszereit",
      "Aki tisztában van a trendekkel és hatékonyan alkalmazni is tudja az új fejlesztéseket",
      "Aki karizmatikus, kezébe veszi még a nehéz feladatokat is és meg is valósítja őket",
      "Aki precíz, fegyelmezett, fókuszált, rendszerezett és hatékony ",
      "Pontosan tudod, miben számíthatsz rá, egyenletes teljesítményt nyújt",
      "Mindig lehet hozzá fordulni segítségért, mindig készen áll támogatni a munkatársakat",
      "Aki igazi csapatjátékos és a legtöbbet tudja kihozni másokból",
      "Aki mindig pozitívan áll a dolgokhoz, tele van ötletekkel"
    ]
  },
  {
    q:"Milyen az ideális munkatárs?",
    type:"text",
    options:[
      "Aki proaktív, elébe megy a dolgoknak, ezáltal a változások motorja.",
      "Aki karizmatikus, kezébe veszi még a nehéz feladatokat is.",
      "Aki precíz, fegyelmezett, fókuszált és pontosan tudod, miben számíthatsz rá.",
      "Aki képes arra, hogy a különböző álláspontokat közös nevezőre hozza.",
      "Aki igazi csapatjátékos és a legtöbbet tudja kihozni másokból.",
      "Aki mindig optimistán áll a dolgokhoz, tele van jó ötletekkel.",
      "Aki nyugodt, kiegyensúlyozott és biztonságot sugároz.",
      "Aki gondoskodó, odafigyel másokra, és támogatja a többieket."
    ]
  },
  {
    q:"Mi a cég sikerstratégiája?",
    type:"text",
    options:[
      "a status quo megkérdőjelezése",
      "elsőként kovácsolni tőkét a piac változásaiból",
      "a vízió és a hatékony vezetés",
      "az elemzésen alapuló tervezés",
      "a biztos alapok lefektetése és a bevált gyakorlatok alkalmazása",
      "felelősségteljes hozzáállás",
      "a különböző igények kielégítése ",
      "az új helyzetekre való rugalmas reagálás"
    ]
  }
];

// kérdés stepek generálása
stepsData.forEach((s, i) => {
  let optionsHtml = s.options.map((opt, idx) => {
    const archetype = archetypeOrder[idx];
    if(s.type === "image"){
      return `<div class="option" data-archetype="${archetype}"><img src="${opt}" alt=""></div>`;
    } else {
      return `<div class="option" data-archetype="${archetype}">${opt}</div>`;
    }
  }).join("");

  // utolsó kérdésnél a gomb már sendResults()-ot hív
  const isLastQuestion = (i === stepsData.length - 1);
  const buttonHandler = isLastQuestion ? "sendResults()" : "nextStep()";
  const buttonLabel = isLastQuestion ? "Eredmény mentése" : "Tovább";

  stepsEl.innerHTML += `
    <div class="step">
      <h2>${i+1}. ${s.q}</h2>
      <div class="options">${optionsHtml}</div>
      <button onclick="${buttonHandler}">${buttonLabel}</button>
      <div class="send-status" ${isLastQuestion ? 'id="sendStatus"' : ''}></div>
    </div>
  `;
});

// végső step – CSAK eredmény (küldés után jelenik meg)
stepsEl.innerHTML += `
<div class="step">
  <h2>Eredményed</h2>
  <div class="result-list" id="result"></div>
</div>
`;

let current = 0;
const steps = document.querySelectorAll(".step");
const totalQuestionSteps = stepsData.length; // intro és eredmény nélkül

function updateProgress() {
  // current: 0 = intro, 1..N kérdések, utolsó = eredmény
  const questionIndex = Math.min(Math.max(current - 1, 0), totalQuestionSteps - 1);
  const total = totalQuestionSteps;
  if (total <= 0) return;

  progressLabel.textContent = `${questionIndex + 1} / ${total}`;
  const percent = (questionIndex / total) * 100;
  progressBar.style.width = `${percent}%`;
}

// start quiz
function startQuiz(){
  const email = document.getElementById("startEmail").value.trim();
  const name = document.getElementById("startName").value.trim();
  const consent = document.getElementById("privacyConsent").checked;

  if(!email || !name) { 
    alert("Kérlek add meg az email címed és neved!"); 
    return; 
  }

  if(!consent){
    alert("Kérlek pipáld be, hogy elolvastad és elfogadod az Adatkezelési tájékoztatót!");
    return;
  }

  steps[0].classList.remove("active");
  current = 1;
  steps[current].classList.add("active");

  quizHeader.style.display = "none";
  progressWrap.style.display = "block";
  updateProgress();
}

// kiválasztás
document.addEventListener("click", e=>{
  const option = e.target.closest(".option");
  if(!option) return;
  option.parentElement.querySelectorAll(".option").forEach(o=>o.classList.remove("selected"));
  option.classList.add("selected");
});

// lépés váltás (köztes kérdésekhez)
function nextStep(){
  const selected = steps[current].querySelector(".option.selected");
  if(!selected) { 
    alert("Válassz egy opciót!"); 
    return; 
  }
  archetypes[selected.dataset.archetype]++;
  steps[current].classList.remove("active");
  current++;
  steps[current].classList.add("active");
  updateProgress();
  window.scrollTo({top:0, behavior:"smooth"});
}

const archetypeDescriptions = {
  Mars: "Itt a Mars leírása, amit te írsz meg.",
  Mercurius: "Itt a Mercurius leírása.",
  Jupiter: "Itt a Jupiter leírása.",
  Apollo: "Itt az Apollo leírása.",
  Terra: "Itt a Terra leírása.",
  Ceres: "Itt a Ceres leírása.",
  Juno: "Itt a Juno leírása.",
  Venus: "Itt a Venus leírása."
};

  
// eredmény megjelenítés
function showResult(){
  const total = Object.values(archetypes).reduce((a,b)=>a+b,0) || 1;
  
  const scores = Object.entries(archetypes).map(([name, score]) => ({
    name,
    percent: Math.round(score / total * 100)
  })).sort((a, b) => b.percent - a.percent);
  
  let html = "";
  scores.forEach(score => {
    const desc = archetypeDescriptions[score.name] || "";
    html += `
      <div class="result-card" data-name="${score.name}">
        <div class="result-head">
          <div class="result-wrapper">
            <div class="result-title">${score.name}</div>
            <div class="result-percent">${score.percent}%</div>
          </div>
          <span class="arrow">▼</span>
        </div>
        <div class="result-desc">
          ${desc}
        </div>
      </div>
    `;
  });
  
  document.getElementById("result").innerHTML = html;
  
  document.querySelectorAll(".result-card").forEach(card => {
    card.querySelector(".result-head").addEventListener("click", () => {
      card.classList.toggle("expanded");
    });
  });
}


let isSending = false;

function sendResults(){
  if (isSending) return;

  const selected = steps[current].querySelector(".option.selected");
  if(!selected) { 
    alert("Válassz egy opciót!"); 
    return; 
  }
  archetypes[selected.dataset.archetype]++;

  const email = document.getElementById("startEmail").value.trim();
  const name = document.getElementById("startName").value.trim();
  if(!email || !name){ 
    alert("Hiányzó név vagy email. Lépj vissza az elejére és töltsd ki."); 
    return; 
  }

  const btn = steps[current].querySelector("button");
  const statusEl = document.getElementById("sendStatus");

  isSending = true;
  btn.disabled = true;
  btn.textContent = "Küldés folyamatban...";
  statusEl.innerHTML = '<span class="spinner"></span>Eredmények mentése...';

  fetch("https://brand-quiz-proxy.vercel.app/api/quiz-proxy", {
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body: JSON.stringify({ email: email, name: name, results: archetypes })
  })
  .then(res => res.text())
  .then(text => {
    console.log("Válasz a szervertől:", text);
    statusEl.textContent = "Az eredményeket elmentettük. Köszönjük a kitöltést!";

    steps[current].classList.remove("active");
    current = steps.length - 1;
    steps[current].classList.add("active");
    progressBar.style.width = "100%";
    progressLabel.textContent = `${totalQuestionSteps} / ${totalQuestionSteps}`;
    showResult();
    window.scrollTo({top:0, behavior:"smooth"});
  })
  .catch(err => {
    console.error(err);
    statusEl.textContent = "Hiba történt a mentés során. Kérjük, próbáld meg később újra.";
    btn.disabled = false;
    btn.textContent = "Eredmény mentése";
    isSending = false;
  });
}
</script>
</body>
</html>
